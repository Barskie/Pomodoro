<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reports - Pivot</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <link rel='stylesheet' href="../style.css">
    
</head>
<body>
    <div id="nav-placeholder">
    </div>

    <div class="container px-5 py-4 mx-auto">
        <div class="container d-flex justify-content-around ">
            <div class = "row">
            <span class = "titleRoutine text-center">
                REPORTS
                <hr class="solid" id="hrWhite2">
            </span>
        </div>
        </div>
        <!-- SUMMARY OF ROUTINE -->
        <div class="container d-flex justify-content-around ">
            <div class = "row text-center">
                <div class = "col-lg-3">
                    <div class = "row">
                        <div class = "card userInfoReportsCard">
                            <span class = "titleRoutine1">
                                USERNAME
                            </span>
                            <hr class = "hrWhite">
                            <span class = "inputNameReports text-center">
                                firstName
                            </span>
                            <small class = "text-center">
                                First Name
                            </small>
                            <span class = "inputNameReports text-center mt-2">
                                lastName
                            </span>
                            <small class = "text-center">
                                Last Name
                            </small>
                            <span class = "inputNameReports text-center mt-2">
                                emailaddress@email.com
                            </span>
                            <small class = "text-center">
                                Email
                            </small>
                        </div>
                       
                    </div>
                    
                   </div>
                   
                <!-- SUB ROUTINES -->
                <div class = "col-lg-9">
                    <div class = "card reportsCard">
                        <div class = "row">
                            <div class = "col-6">
                                <div class = "row">
                                    <span class = "titleReports text-right">
                                        DATE STARTED:
                                    </span>
                                    <div class = "col text-right mb-3">
                                        <input type="date" id="Test_DatetimeLocal" class = "dateReportS">
                                    </div>
                                </div>   
                            </div>
                            <div class = "col-6">
                                <div class = "row">
                                    <span class = "titleReports text-left">
                                        DATE ENDED:
                                    </span>
                                    <div class = "col text-left">
                                        <input type="date" id="Test_DatetimeLocal" class = "dateReportS">
                                    </div>
                                </div>   
                            </div>
                            <div class = "row text-center">
                                <div class = "col mb-4">
                                    <button type = "button" class = "btn" id = "reportsSort">SORT
                                    </button>
                                </div>

                            </div>
                       
                            <hr class = "hrWhite">
                            <div class = "col-6">
                                <div class = "row">
                                    <span class = "titleReports text-center">
                                        NO. OF TASKS COMPLETED:
                                    </span>
                                    <div class = "summaryNo text-center">
                                        10
                                    </div>
                                </div> 
                             </div>
                             <div class = "col-6">
                                <div class = "row">
                                    <span class = "titleReports text-center">
                                        NO. OF ROUTINES COMPLETED:
                                    </span>
                                    <div class = "summaryNo text-center">
                                        10
                                    </div>
                                </div> 
                             </div>
                        </div>
                       
                        <hr class = "hrWhite">
                        <span class = "titleReports text-left">
                            TASK COMPLETED
                        </span>
                        <div class = "reportsTableCard">
                            <table class="table table-striped">
                                <thead>
                                  <tr>
                                    <th colspan="2">TASK NAME</th>
                                    <th scope="col-2">TIME PER SESSION</th>
                                    <th scope="col-2">NO. OF SUBTASKS</th>
                                    <th scope="col-2">TIME/DATE STARTED</th>
                                    <th scope="col-2">TIME/DATE COMPLETED</th>
                                  </tr>
                                </thead>
                                <tbody id="task">
                                    <!-- ONE TASK REPORT -->
                                  <tr>
                                    <td colspan="2" class = "text-left">PROGRAMMING</td>
                                    <td>25:00</td>
                                    <td>4</td>
                                    <td>21:00/06-11-2022</td>
                                    <td>23:00/06-11-2022</td>
                                  </tr>
                                  <!-- END OF ONE TASK REPORT -->
                                </tbody>
                            </table>
                        </div>
                        <hr class = "hrWhite">
                        <span class = "titleReports text-left">
                            ROUTINES COMPLETED
                        </span>
                        <div class = "reportsTableCard">
                            <table class="table table-striped">
                                <thead>
                                  <tr>
                                    <th colspan="2">ROUTINE NAME</th>
                                    <th scope="col-2">TIME PER SESSION</th>
                                    <th scope="col-2">NO. OF SUBTASKS</th>
                                    <th scope="col-2">NO. OF TIMES</th>
                                  </tr>
                                </thead>
                                <tbody>
                                    <!-- ONE ROUTINE REPORT -->
                                  <tr>
                                    <td colspan="2" class = "text-left">WEEKLY ACTIVITY</td>
                                    <td>30:00</td>
                                    <td>6</td>
                                    <td>3</td>
                                  </tr>
                                  <!-- END OF ONE ROUTINE REPORT -->
                                </tbody>
                            </table>
                        </div>
                        <hr class = "hrWhite">
                        <span class = "titleReports text-left">
                            ASSESSMENTS COMPLETED
                        </span>
                        <div class = "reportsTableCard">
                            <table class="table table-striped">
                                <thead>
                                  <tr>
                                    <th scope="col-2">#</th>
                                    <th scope="col-2">POINTS</th>
                                    <th colspan="2">CURRENT TIME MANAGEMENT SKILL</th>
                                    <th scope="col-2">TIME/DATE COMPLETED</th>
                                    
                                  </tr>
                                </thead>
                                <tbody id="assessments">
                                    <!-- ONE ROUTINE REPORT -->
                                  <tr>
                                    
                                    <td>01</td>
                                    <td>48</td>
                                    <td colspan="2" class = "text-left">You have excellent time mangament skills and should use this guide as a reference</td>
                                    <td>06-11-2022</td>
                                  </tr>
                                  <!-- END OF ONE ROUTINE REPORT -->
                                </tbody>
                            </table>
                        </div>


                                


                    </div>
                </div>
           
            </div>

            <script src="//code.jquery.com/jquery.min.js"></script>
            <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
            <script src="sweetalert2.all.min.js"></script>
            <link rel="stylesheet" href="sweetalert2.min.css">
            <script>
            $.get("../navigationBar.html", function(data){
                $("#nav-placeholder").replaceWith(data);
                });
            </script>
            <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
            <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js" integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+" crossorigin="anonymous"></script>
            <script>
                window.onload = function() {
                    window.onpageshow = function (event) {
                    if (event.persisted) {
                        window.location.reload(); 
                    }
                    };
                }
            
            
            if(!localStorage.getItem('user_id')){
               
                        window.location = "http://localhost/pomodoro/user/login.html";
                  
                    
                }
            </script>
            <script>
                showReports()

                function showReports(){
                 $.ajax({
                        type:"POST",
                        url: "http://localhost/pomodoro/api/reports.php",
                        dataType: "json",
                        data:{
                            user_id: localStorage.getItem('user_id'),
                        },
                        
                        cache:false,
                        success: function(dataResult){
                            var arrayAssessments = dataResult.assessments;
                            var arrayTask = dataResult.task;
                            console.log(dataResult)

                            var innerHtmlAssessments = ''
                            var innerHtmlTask = ''
                            for(let i = 0; dataResult.assessments.length > i; i++){
                                var managementSkill = ''
                                if(arrayAssessments[i].points >= 45 && arrayAssessments[i].points <= 50 ){
                                    managementSkill = 'You have excellent time mangament skills and should use this guide as a reference	 '
                                }else if(arrayAssessments[i].points >= 30 && arrayAssessments[i].points <= 44){
                                    managementSkill = 'You manage your time fairly well but should use this guide to increase skill'

                                }else{
                                    managementSkill = 'Your time management skill should be improved for college but not panic, following the subsquent guidelines will assist you in improving your ability and further your chances of success'
                                }
                                innerHtmlAssessments+='<tr>'
                                innerHtmlAssessments+='<td>'+parseInt(i+1)+'</td>'
                                innerHtmlAssessments+='<td>'+arrayAssessments[i].points+'</td>'
                                innerHtmlAssessments+='<td colspan="2" class = "text-center">'+managementSkill+'</td>'
                                innerHtmlAssessments+='<td>'+arrayAssessments[i].date_created+'/'+arrayAssessments[i].time_created+'</td>'
                                innerHtmlAssessments+='</tr>'
                            }
                            for(let i = 0; dataResult.task.length > i; i++){
                                innerHtmlTask+='<tr>'
                                innerHtmlTask+='<td colspan="2" class = "text-left">'+arrayTask[i].task_name+'</td>'
                                innerHtmlTask+='<td>'+arrayTask[i].pomodoro+':00</td>'
                                innerHtmlTask+='<td>'+arrayTask[i].subtask_no+'</td>'
                                innerHtmlTask+='<td>'+arrayTask[i].start_date+'/'+arrayTask[i].start_time+'</td>'
                                innerHtmlTask+='<td>'+arrayTask[i].end_date+'/'+arrayTask[i].end_time+'</td>'
                                innerHtmlTask+='</tr>'
                            }

                            $('#task').html(innerHtmlTask)
                            $('#assessments').html(innerHtmlAssessments)
                        },error:function(err){
                            console.log('error')		 
                        }
                    })
                }
            </script>

</body>
</html>