<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create an Account - Pivot</title>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <link rel='stylesheet' href="../style.css">
    
</head>
<body>
    <!-- NAVBAR !-->
    <div id="nav-placeholder">
    </div>
    

    <!-- SIGN-UP ACCOUNT !-->

    <section class = "signUp">

        <div class="container d-flex justify-content-center my-auto h-auto" id="signUpContainer">
            <div class="card regCard">
        <div class="row my-2 mx-2 mainRegistration">
            <!--left-column-->
            <div class="col-xl-4 col-12 mycolSignUp">
                <!--image
                <img src=""width="100%" height="100%">-->
                
            </div>
            <!--right-column-->
            <div class="col-xl-8 col-12 xcolSignUp">
    
                <h2 class="title pt-5 pb-3 text-center" id="titleSignUp">JOIN US!</h2>
                <form action="javascript:register();" method="POST" id="signup">
 
                <hr class = "hrWhite">
                <form class="myform" type="post" method="post">
                    <div class = "regScroll">
                    <div class="row rone">
                        <div class="form-group col-md-6 ">
                            <label>First Name</label>
                            <input type="text" class = "regForm" id = "first_name" class="form-control" placeholder="First Name" required> 
                        </div>
                        <div class="form-group col-md-6">
                            <label>Last Name</label>
                            <input type="text" class = "regForm" id = "last_name" class="form-control" placeholder="Last Name" required>
                        </div>
                    </div>
                    <div class="row rtwo">
                        <div class="form-group">
                            <label>Username</label>
                            <input type="text" class = "regForm" id = "user_name" class="form-control" placeholder="Username" required>
                        </div>
                        <div class="form-group">
                            <label>Email Address</label>
                            <input type="email" class = "regForm" id = "email" class="form-control" placeholder="Email Address" required>
                        </div>
                    
                        <div class="form-group">
                            <label>Password</label>
                            <input type="password" class = "regForm" id = "password" class="form-control" placeholder="Password"  pattern="(?=^.{8,}$)(?=.*[A-Z])(?=.*?[~`!@#$%\^&*()\-_=+[\]{};:\x27.,\x22\\|/?<>]).{8,}" title="Password must at least be 8 characters in length, and contain 1 uppercase character and 1 special character." required><i class="far fa-eye" id="togglePassword" style="margin-left: -35px; cursor: pointer;"></i>
                        </div>
                        <div class="form-group ">
                            <label>Confirm Password</label>
                            <input type="password" class = "regForm" id = "confirm_password" class="form-control" placeholder="Confirm Password"  pattern="(?=^.{8,}$)(?=.*[A-Z])(?=.*?[~`!@#$%\^&*()\-_=+[\]{};:\x27.,\x22\\|/?<>]).{8,}" title="Password must at least be 8 characters in length, and contain 1 uppercase character and 1 special character." required><i class="far fa-eye" id="toggleConfirmPassword" style="margin-left: -35px; cursor: pointer;"></i>
                        </div>
                        </div>
                 
                </div>
                    <hr class = "hrWhite">
                    <div class = "row">
                        <div class = "col text-center">
                            <input type="checkbox" id="termsAndConditions" name="termsAndConditions" value="termsAndConditions" data-group="group1" required>
                            <span class = "mt-3"> I agree to the</span>
                            <button type="button" class="btn termsAndConditionsBtn" data-toggle="modal" data-target="#termsModal" id = "termsAndConditions">
                                <span class = "terms">
                                    Terms and Conditions</span>
                            </button>
                            <span> and </span>
                            <button type="button" class="btn termsAndConditionsBtn" data-toggle="modal" data-target="#privacyModal" id = "termsAndConditions">
                                <span class = "terms">
                                    Privacy Policy</span>
                                </button>
                        </div>
                    </div>
                    <!-- Modal -->
                    <div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true">
                        <div class="modal-dialog  modal-xl modal-dialog-scrollable">
                        <div class="modal-content">
                            <div class="modal-header text-center d-block">
                            <h5 class="modal-title d-inline-block" id="exampleModalLabel">TERMS AND CONDITIONS</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                            </div>
                            <div class="modal-body" style = "background-color: white; border-radius: 15px">
                                <div class = "termsAndConditionsContent">
                                </div>
                            </div>
                            <div class="modal-footer">
                                <hr class = "solid">
                                <div class = "row text-center">
                                    <div class = "col mt-4 mb-4">
                                <input type="checkbox" id="termsAndConditions2" name="termsAndConditions" value="termsAndConditions" data-group="group1" required><span class = "terms ml-3">
                                    I agree to the Terms and Conditions</span>
                                </div>
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">DONE</button>
                        </div>
                           
                            </div>
                        </div>
                        </div>
                    </div>
                    <div class="modal fade" id="privacyModal" tabindex="-1" aria-labelledby="privacyModalLabel" aria-hidden="true">
                        <div class="modal-dialog  modal-xl modal-dialog-scrollable">
                        <div class="modal-content">
                            <div class="modal-header text-center d-block">
                            <h5 class="modal-title d-inline-block" id="exampleModalLabel">PRIVACY POLICY</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                            </div>
                            <div class="modal-body" style = "background-color: white; border-radius: 15px">
                                <div class = "privacyPolicyContent">
                                </div>
                            </div>
                            <div class="modal-footer">
                                <hr class = "solid">
                                <div class = "row text-center">
                                    <div class = "col mt-4 mb-4">
                                        <input type="checkbox" id="privacyPolicy" name="privacyPolicy" value="privacyPolicy" data-group="group1" required><span class = "terms ml-3">
                                            I agree to the Privacy Policy</span>
  
                                </div>
                            <button type="button" class="btn btn-secondary" data-dismiss="modal" id = "doneBtn">DONE</button>
                        
                      </div>
                      </div>
                      </div>
                      </div>
                    </div>
                    <div class="row justify-content-center my-auto text-center">
                        <div class="form-group col-md-6 mt-3">
                            <button type="submit" class="btn btn-primary" id = "btnOnSignUp" ><span class = "spanSignUp">Create account</span></button>
                        </div>
                        </div>
                        <div class="row justify-content-center my-auto text-center">
                        <div class="form-group col-md-6">
                            <p class="text-muted">Already have an account?<br><a class = "backToLogin" href="login.html">Sign in</a></p>   
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
        </section>

    </body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="sweetalert2.all.min.js"></script>
    <link rel="stylesheet" href="sweetalert2.min.css">
    
       
        <script>
        
        function register(){
            var verification_code = Math.floor(100000 + Math.random() * 900000)
            
            localStorage.setItem('verification_code',verification_code)
            var first_name = $('#first_name').val();
            var last_name = $('#last_name').val();
            var user_name = $('#user_name').val();
            var password = $('#password').val();
            var confirm_password = $('#confirm_password').val();
            var email = $('#email').val();
            

            if(confirm_password == password){
                localStorage.setItem('first_name',first_name)
                localStorage.setItem('last_name',last_name)
                localStorage.setItem('user_name',user_name)
                localStorage.setItem('password',password)
                localStorage.setItem('email',email)
                $.ajax({
                type:"POST",
                url: "../api/mail_sender.php",
                dataType: "json",
                 data:{
                    email: email,
                    verification_code: verification_code
                },
                
                cache:false,
                success: function(dataResult){
                    if(dataResult.status){
                        Swal.fire({
                        title: 'EMAIL SENT!', 
                        confirmButtonColor: "#783937",
                        text: "Please check the inbox of the email address that you provided.",
                        icon: 'success',
                        confirmButtonText: 'OK'
                    }).then(function() {
                        window.location.href = "emailVerification.html";
                    });
                    } else {
                    Swal.fire({
                        title: 'EMAIL ALREADY EXIST!', 
                        confirmButtonColor: "#783937",
                        text: "The email is registered to an account.",
                        icon: 'warning',
                        confirmButtonText: 'OK' })
                    }
                    
                    
                    
                    
                },error:function(err){
              console.log('error')		 
            }
            })
        
        }
    }

    
      </script>


      <script>
      $.get("../navigationBar.html", function(data){
          $("#nav-placeholder").replaceWith(data);
          });
      </script>
      <script>
        $.get("../termsAndConditions.html", function(data){
            $(".termsAndConditionsContent").replaceWith(data);
            });
        </script>
        <script>
            $.get("../privacyPolicy.html", function(data){
                $(".privacyPolicyContent").replaceWith(data);
                });
            </script>
        <script>
            $(document).on('click', 'input[type="checkbox"][data-group]', function(event) {
                var actor = $(this);
                var checked = actor.prop('checked');
                var group = actor.data('group');
                var checkboxes = $('input[type="checkbox"][data-group="' + group + '"]');
                var otherCheckboxes = checkboxes.not(actor);
                otherCheckboxes.prop('checked', checked);
                });
        </script>
     
      <script>
        const togglePassword = document.querySelector('#togglePassword');
        const password = document.querySelector('#password');
        togglePassword.addEventListener('click', function (e) {
        const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
        password.setAttribute('type', type);
        this.classList.toggle('fa-eye-slash');
});
    </script>
    <script>
        const toggleConfirmPassword = document.querySelector('#toggleConfirmPassword');
        const confirmPassword = document.querySelector('#confirm_password');
        toggleConfirmPassword.addEventListener('click', function (e) {
        const type = confirmPassword.getAttribute('type') === 'password' ? 'text' : 'password';
        confirmPassword.setAttribute('type', type);
        this.classList.toggle('fa-eye-slash');
});
    </script>
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js" integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+" crossorigin="anonymous"></script>


</html>